{"ast":null,"code":"var _jsxFileName = \"/home/luigr/repositories/recipes-app/src/pages/MainPage.jsx\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport RecipesContext from '../contexts/RecipesContext';\nimport '../styles/buttons.css';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport { fetchFoodOnLoad, fetchFoodCategories, fetchFoodByCategories } from '../services/comidasApi';\nexport default function MainPage() {\n  const {\n    mealsData\n  } = useContext(RecipesContext);\n  const [meals, setMeals] = useState(mealsData);\n  const [categories, setCategories] = useState([]);\n  const [filterCategory, setFilterCategory] = useState('');\n  const history = useHistory();\n  const MAX_NUM = 12;\n  const FIVE = 5;\n  useEffect(() => {\n    async function handleMealsOnLoad() {\n      if (mealsData && mealsData.length === 0 || !mealsData) {\n        const food = await fetchFoodOnLoad();\n        setMeals(food);\n      } else {\n        setMeals(mealsData);\n      }\n    }\n\n    handleMealsOnLoad();\n\n    async function handleCategories() {\n      const dataCategories = await fetchFoodCategories();\n      setCategories(dataCategories);\n    }\n\n    handleCategories();\n  }, [mealsData]);\n\n  async function renderRecipes(category) {\n    if (category === filterCategory) {\n      const dataCategories = await fetchFoodOnLoad();\n      setFilterCategory('');\n      return setMeals(dataCategories);\n    }\n\n    const dataRecipes = await fetchFoodByCategories(category);\n    setFilterCategory(category);\n    setMeals(dataRecipes);\n  }\n\n  async function renderAllRecipes() {\n    const dataCategories = await fetchFoodOnLoad();\n    setFilterCategory('');\n    return setMeals(dataCategories);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    title: \"Comidas\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"All-category-filter\",\n    type: \"button\",\n    className: \"buttons\",\n    onClick: renderAllRecipes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, \"All\"), categories && categories.slice(0, FIVE).map(category => /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    name: \"category\",\n    className: \"buttons\",\n    onClick: () => renderRecipes(category.strCategory),\n    key: category.strCategory,\n    \"data-testid\": `${category.strCategory}-category-filter`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, category.strCategory)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cards\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, meals && meals.slice(0, MAX_NUM).map((elem, index) => /*#__PURE__*/React.createElement(\"div\", {\n    tabIndex: 0 // SOURCE: encurtador.com.br/bjqHQ\n    ,\n    role: \"button\",\n    onKeyDown: () => history.push(`/comidas/${elem.idMeal}`),\n    onClick: () => history.push(`/comidas/${elem.idMeal}`),\n    \"data-testid\": `${index}-recipe-card`,\n    key: elem.idMeal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": `${index}-card-img`,\n    src: elem.strMealThumb,\n    alt: \"Imagem da receita\",\n    width: \"200\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    \"data-testid\": `${index}-card-name`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, elem.strMeal)))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/home/luigr/repositories/recipes-app/src/pages/MainPage.jsx"],"names":["React","useContext","useEffect","useState","useHistory","RecipesContext","Header","Footer","fetchFoodOnLoad","fetchFoodCategories","fetchFoodByCategories","MainPage","mealsData","meals","setMeals","categories","setCategories","filterCategory","setFilterCategory","history","MAX_NUM","FIVE","handleMealsOnLoad","length","food","handleCategories","dataCategories","renderRecipes","category","dataRecipes","renderAllRecipes","slice","map","strCategory","elem","index","push","idMeal","strMealThumb","strMeal"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport RecipesContext from '../contexts/RecipesContext';\nimport '../styles/buttons.css';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport {\n  fetchFoodOnLoad,\n  fetchFoodCategories,\n  fetchFoodByCategories } from '../services/comidasApi';\n\nexport default function MainPage() {\n  const { mealsData } = useContext(RecipesContext);\n  const [meals, setMeals] = useState(mealsData);\n  const [categories, setCategories] = useState([]);\n  const [filterCategory, setFilterCategory] = useState('');\n  const history = useHistory();\n\n  const MAX_NUM = 12;\n  const FIVE = 5;\n\n  useEffect(() => {\n    async function handleMealsOnLoad() {\n      if ((mealsData && mealsData.length === 0) || !mealsData) {\n        const food = await fetchFoodOnLoad();\n        setMeals(food);\n      } else {\n        setMeals(mealsData);\n      }\n    }\n    handleMealsOnLoad();\n\n    async function handleCategories() {\n      const dataCategories = await fetchFoodCategories();\n      setCategories(dataCategories);\n    }\n    handleCategories();\n  }, [mealsData]);\n\n  async function renderRecipes(category) {\n    if (category === filterCategory) {\n      const dataCategories = await fetchFoodOnLoad();\n      setFilterCategory('');\n      return setMeals(dataCategories);\n    }\n    const dataRecipes = await fetchFoodByCategories(category);\n    setFilterCategory(category);\n    setMeals(dataRecipes);\n  }\n\n  async function renderAllRecipes() {\n    const dataCategories = await fetchFoodOnLoad();\n    setFilterCategory('');\n    return setMeals(dataCategories);\n  }\n\n  return (\n    <div>\n      <Header title=\"Comidas\" />\n      <button\n        data-testid=\"All-category-filter\"\n        type=\"button\"\n        className=\"buttons\"\n        onClick={ renderAllRecipes }\n      >\n        All\n      </button>\n      {categories && categories.slice(0, FIVE).map((category) => (\n        <button\n          type=\"button\"\n          name=\"category\"\n          className=\"buttons\"\n          onClick={ () => renderRecipes(category.strCategory) }\n          key={ category.strCategory }\n          data-testid={ `${category.strCategory}-category-filter` }\n        >\n          {category.strCategory}\n        </button>))}\n      <div className=\"cards\">\n        { meals && meals.slice(0, MAX_NUM).map((elem, index) => (\n          <div\n            tabIndex={ 0 } // SOURCE: encurtador.com.br/bjqHQ\n            role=\"button\"\n            onKeyDown={ () => (history.push(`/comidas/${elem.idMeal}`)) }\n            onClick={ () => (history.push(`/comidas/${elem.idMeal}`)) }\n            data-testid={ `${index}-recipe-card` }\n            key={ elem.idMeal }\n          >\n            <img\n              data-testid={ `${index}-card-img` }\n              src={ elem.strMealThumb }\n              alt=\"Imagem da receita\"\n              width=\"200\"\n            />\n            <h3\n              data-testid={ `${index}-card-name` }\n            >\n              { elem.strMeal }\n            </h3>\n          </div>\n        ))}\n      </div>\n      <Footer />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}